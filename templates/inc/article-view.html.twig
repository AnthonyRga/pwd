{% extends 'base.html.twig' %}
{% block title %}Article sélectionné{% endblock %}
{% block body %}
    {{ include('inc/navbar.html.twig') }}

<div class="container">
    <div class="row">
        <div class="col">
            <div class="card-article">
                <img class="img-article" src="{{ asset('uploads/' ~ articles.image) }}" class="card-img-top">
            </div>
        </div>
        <div class="col">
            <div class="box-desc">
                <p class="name-model">{{ articles.name }} </p>
                <p class="name-model">{{ articles.model }} </p>


                <p class="price">{{ articles.price }} €</p>
                <p class="prod-desc">Capacité {{ articles.capacity }} ml</p>
                <p class="prod-desc">Puissance {{ articles.power }} watts</p>
                <p class="prod-desc">Hauteur de {{ articles.lenght }} cm</p>
                <p class="prod-desc">Diamètre de  {{ articles.diameter }} cm</p>
                <p class="prod-desc">Autonomie de {{ articles.autonomy }} mha</p>

                {% for store in articles.store %}
                <p class="rating"><i class="fas fa-store-alt"></i> {{ store.name }}</p>
                    <p class="rating"><i class="far fa-star"></i> Province de {{ store.province }}, à {{ store.ville }} </p>
                <p><i class="fas fa-map-marker-alt"></i> Rue {{ store.street }}, n°{{ store.number }} </p>
                {% endfor %}
            </div>
        </div>
    </div>

    <label class="label-com" for="">{{ articles.comments | length }} Commentaire(s) </label>

    {% for comment in articles.comments %}
        <div class="box-comments">
            <div class="row">
                <div class="col-1">
                    {% if comment.user.sexe == "Homme" %}
                        <img class="avatar" src="{{asset('asset/image/homme.png')}}" alt="homme">
                    {% elseif comment.user.sexe == "Femme" %}
                        <img class="avatar" src="{{asset('asset/image/femme.png')}}" alt="femme">
                    {% elseif comment.user.sexe == "Anonyme" %}
                        <img class="avatar" src="{{asset('asset/image/anonymous.png')}}" alt="anonyme">
                    {% endif %}
                </div>
                <div class="col-11">
                    <a class="link-comments" href="{{ path('user-id',{id: comment.user.id}) }}"><i class="far fa-user"></i> {{ comment.user.username }}</a> <!-- { { app.user.username }} -->
                    <p class="comments">{{ comment.content }}</p>
                    {% if app.user.username is not defined  %}
                    {{ app.user.username|default('') }}
                    {% elseif app.user.username  ==  comment.user.username  %}
                        <a class="btn btn-success" style="color:white;margin-left: 30px;margin-top: 18px;"  href="{{ path('editComment',{id: comment.id}) }}">Éditer</a>
                        <a class="btn btn-danger" style="color:white;margin-top: 18px;" href="{{ path('removeUserComment',{id: comment.id}) }}">Supprimer</a>
                        {% elseif  is_granted('ROLE_ADMIN') %}
                            <a class="btn btn-danger butad" style="color:white;margin-top: 18px;" href="{{ path('removeUserComment',{id: comment.id}) }}">Supprimer</a>
                    {% endif %}
                </div>
            </div>
        </div>

    {% endfor %}

    {% if app.user %}
        {{ form_start(commentForm) }}
        {{ form_row(commentForm.content) }}
        {{ form_end(commentForm) }}
    {% else %}
        <div class="box-comments">
        <p class="link-comments">Veuillez vous connecter pour poster un commentaire</p>
        <a class="btn btn-nav" href="{{ path('security-login') }}">Connexion</a>
        </div>
    {% endif %}

</div>
{% endblock %}